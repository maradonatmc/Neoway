# Criação do banco de dados
CREATE DATABASE "NEOWAY"
    WITH 
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'C'
    LC_CTYPE = 'C'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1;
COMMIT;

# Criação da tabela PESSOA
CREATE TABLE PESSOA 
	( 
		ID_PESSOA SERIAL PRIMARY KEY, 
		COD_CPF_PESSOA VARCHAR(11) NOT NULL, 
		FLG_PRIVATE CHAR(1) NOT NULL DEFAULT 0, 
		FLG_INCOMPLETO CHAR(1) NOT NULL DEFAULT 0,
		DAT_ULTIMA_COMPRA DATE,
		VLR_TICKET_MEDIO NUMERIC(17,8), 
		VLR_TICKET_ULTIMA_COMPRA NUMERIC(17,8),
		COD_CNPJ_LOJA_MAIS_FREQUENTE VARCHAR(14),
		COD_CNPJ_LOJA_ULTIMA_COMPRA VARCHAR(14),
		DAT_CRIACAO_REGISTRO DATE
	);
COMMIT;

# Criação dos índices
CREATE UNIQUE INDEX UNQ_COD_CPF_PESSOA ON PESSOA (COD_CPF_PESSOA);
COMMIT;

CREATE INDEX IDX_COD_CNPJ_LOJA_MAIS_FREQUENTE ON PESSOA (COD_CNPJ_LOJA_MAIS_FREQUENTE);
COMMIT;

CREATE INDEX IDX_COD_CNPJ_LOJA_ULTIMA_COMPRA ON PESSOA (COD_CNPJ_LOJA_ULTIMA_COMPRA);
COMMIT;
